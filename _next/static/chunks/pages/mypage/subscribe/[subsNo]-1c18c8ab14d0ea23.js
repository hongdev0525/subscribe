(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{3675:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mypage/subscribe/[subsNo]",function(){return t(7201)}])},8482:function(n,e,t){"use strict";var i=t(7297),r=t(5893),o=t(9521);t(1163);var s=t(5675),l=t.n(s),c=t(9971);function a(){let n=(0,i.Z)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding-bottom: 67px;\n  border-bottom: 1px solid #232323;\n  @media "," {\n    border-bottom:none;\n    padding-bottom: 0;\n    margin-bottom: 40px;\n  }\n"]);return a=function(){return n},n}function u(){let n=(0,i.Z)(["\n  text-align: center;\n  width: 100%;\n"]);return u=function(){return n},n}function d(){let n=(0,i.Z)(["\n    font-size: 28px;\n    line-height: 33px;\n    font-weight: ",";\n    margin-bottom: 12px;\n    @media "," {\n      font-size: 20px;\n      font-weight: ",";\n  }\n"]);return d=function(){return n},n}function h(){let n=(0,i.Z)(["\n  position: absolute;\n  left:0;\n  top:17px;\n  transform: translate(0%,-50%);\n  img{\n    cursor: pointer;\n  }\n  @media "," {\n    img{\n      width: 28px;\n      height: 28px;\n    } \n  }\n"]);return h=function(){return n},n}t(7294);let p=o.ZP.div(a(),c.Uh.mobileL),f=o.ZP.div(u()),x=o.ZP.div(d(),(0,c.Ue)("medium"),c.Uh.mobileL,(0,c.Ue)("regular")),m=o.ZP.div(h(),c.Uh.mobileL);e.Z=function(n){let{url:e,title:t,backward:i=!0}=n,o=n=>{location.href=n};return(0,r.jsxs)(p,{children:[!0===i&&(0,r.jsx)(m,{children:(0,r.jsx)(l(),{src:"/img/mypage/backward_icon.png",width:34,height:34,alt:"뒤로가기 아이콘",onClick:()=>o(e)})}),(0,r.jsx)(f,{children:(0,r.jsx)(x,{children:t})})]})}},9339:function(n,e,t){"use strict";var i=t(7297),r=t(5893),o=t(9521),s=t(8264),l=t(2836),c=t(9971);t(8767),t(5838);var a=t(4480),u=t(4410);t(7294);var d=t(2490);function h(){let n=(0,i.Z)(["\n  margin-bottom: 40px;\n"]);return h=function(){return n},n}function p(){let n=(0,i.Z)(["\n  width: 100%;\n  background-color: #fefefe;\n  border: 1px solid #DC5F00;  \n  padding: 12px 40px  52px;\n  border-radius: 10px;\n  margin-top: 20px;\n  @media "," {\n    width: 100%;\n    padding:20px;\n    margin-top: 30px;\n  }\n"]);return p=function(){return n},n}function f(){let n=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return f=function(){return n},n}function x(){let n=(0,i.Z)(["\n    display: flex;\n    justify-content: space-between;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    padding: 30px 0 ;\n    border-bottom: 0.5px solid #A9A9A8;\n    @media "," {\n    padding:20px 0 ;\n  }\n"]);return x=function(){return n},n}function m(){let n=(0,i.Z)(["\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    @media "," {\n    margin-bottom: 8px;\n  }\n"]);return m=function(){return n},n}function g(){let n=(0,i.Z)(["\n    font-size: 18px;\n    line-height: 39px;\n    font-weight: ",";\n  @media "," {\n    font-size: 12px;\n    line-height: 16px;\n    font-weight: ",";\n    flex-basis: 20%;\n  }\n"]);return g=function(){return n},n}function b(){let n=(0,i.Z)(["\n    display: flex;\n    font-size: 18px;\n    line-height: 39px;\n    font-weight: ",";\n    p{\n      padding-left: 10px;\n      span{\n      font-weight: ",";\n    }\n    }\n\n    @media "," {\n    font-size: 12px;\n    line-height: 14px;\n    font-weight: ",";\n    p{\n      padding-left: 4px;\n      white-space: nowrap;\n    }\n    span{\n      font-weight: ",";\n    }\n  }\n"]);return b=function(){return n},n}function w(){let n=(0,i.Z)(["\ndisplay: flex;\n  flex-direction: column;\n  align-items: flex-end;\n @media "," {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  width: 100%;\n }\n"]);return w=function(){return n},n}function y(){let n=(0,i.Z)(["\n  display: flex;\n  justify-content: space-between;\n  width: 305px;\n  font-size:18px;\n  line-height: 33px;\n  font-weight: ",";\n  span, p{\n  color: #DC5F00;\n  }\n  p{\n  }\n  @media "," {\n    justify-content: flex-end;\n    width: 100%;\n    font-size: 12px;\n    p{\n      text-align: right;\n      flex-basis: 30%;\n    }\n    span{\n      text-align: right;\n      flex-basis: 30%;\n    }\n  }\n"]);return y=function(){return n},n}function j(){let n=(0,i.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  width: 100%;\n  text-align: right;\n  font-size:20px;\n  line-height: 33px;\n  font-weight: ",";\n  margin-top: 30px;\n  color:#DC5F00;\n  & span{\n      font-size:18px;\n      line-height: 33px;\n      font-weight: ",";\n      margin-right: 22px;\n      color:#DC5F00;\n\n  }\n  & h2{\n    font-size: 24px;\n      font-weight: ",";\n      color:#DC5F00;\n  }\n\n  @media "," {\n    text-align: right;\n    font-size:12px;\n    line-height: 12px;\n    font-weight: ",";\n    margin-top: 15px;\n    color:#DC5F00;\n    & span{\n        font-size:12px;\n        line-height: 13px;\n        font-weight: ",";\n        margin-right: 22px;\n        color:#DC5F00;\n\n    }\n    & h2{\n      font-size:16px;\n    }\n\n\n  }\n"]);return j=function(){return n},n}let Z=o.ZP.div(h()),v=o.ZP.div(p(),c.Uh.mobileL),P=o.ZP.ul(f()),C=o.ZP.li(x(),c.Uh.mobileL),U=o.ZP.div(m(),c.Uh.mobileL),D=o.ZP.p(g(),(0,s.U)("regular"),c.Uh.mobileL,(0,s.U)("regular")),N=o.ZP.div(b(),(0,s.U)("regular"),(0,s.U)("semiBold"),c.Uh.mobileL,(0,s.U)("bold"),(0,s.U)("regular")),E=o.ZP.div(w(),c.Uh.mobileL),A=o.ZP.div(y(),(0,s.U)("semiBold"),c.Uh.mobileL),F=o.ZP.div(j(),(0,s.U)("semiBold"),(0,s.U)("semiBold"),(0,s.U)("bold"),c.Uh.mobileL,(0,s.U)("bold"),(0,s.U)("semiBold"));e.Z=function(n){let{subsNo:e,stateKey:t,refundType:i}=n,o=(0,a.sJ)((0,u.By)(t));return(0,a.Zl)((0,u.By)(t)),(0,r.jsxs)(Z,{children:[(0,r.jsx)(l.Dx,{children:"환불 정보"}),(0,r.jsxs)(v,{children:[(0,r.jsxs)(P,{children:[o.list.NextDeliveryDate&&(0,r.jsx)(C,{children:(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"마지막 배송일"}),(0,r.jsx)(N,{children:(0,r.jsx)("p",{children:d.y.DateFormatting(o.list.NextDeliveryDate).split(" ")[0]})})]})}),(0,r.jsxs)(C,{children:[(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"결제금액"}),(0,r.jsxs)(N,{children:[d.y.numberCommaFormat(o.list.TotalPrice),"원"]})]}),(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"이용내역"}),(0,r.jsx)(N,{children:o.list.Tags&&o.list.Tags.map((n,e)=>(0,r.jsxs)("p",{children:[n.TagLabel," ( ",(0,r.jsxs)("span",{children:[n.UseAmount,"개 "]})," / ",n.TotalAmount,"개)"]},"refundProduct".concat(e)))})]}),(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"이용금액"}),(0,r.jsxs)(N,{children:[d.y.numberCommaFormat(o.list.UsePrice),"원"]})]})]}),(0,r.jsx)(C,{children:(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"환불금액"}),(0,r.jsxs)(E,{children:[(0,r.jsxs)(A,{children:[(0,r.jsx)("span",{children:"카드부분취소"}),(0,r.jsxs)("p",{children:[d.y.numberCommaFormat(o.list.TotalPrice-o.list.UsePrice),"원"]})]}),o.list.MilesAmount&&(0,r.jsxs)(A,{children:[(0,r.jsx)("span",{children:"포인트 반환"}),(0,r.jsxs)("p",{children:[d.y.numberCommaFormat(o.list.MilesAmount),"원"]})]})]})]})})]}),(0,r.jsxs)(F,{children:[(0,r.jsx)("span",{children:"총 환불금액"}),(0,r.jsxs)("h2",{children:[d.y.numberCommaFormat(o.list.TotalPrice-o.list.UsePrice+(o.list.MilesAmount?o.list.MilesAmount:0)),"원"]})]})]})]})}},7201:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return K}});var i=t(7297),r=t(5893),o=t(7294),s=t(9521);t(9230);var l=t(9971),c=t(4480);function a(){let n=(0,i.Z)(["\n  min-width: 50%;\n\n"]);return a=function(){return n},n}t(5540),t(9879),s.ZP.div(a());var u=t(8482),d=t(4881),h=t(1292),p=t(8027),f=t(6777),x=t(7505),m=t(4515),g=t(6798),b=t(9339),w=t(5518),y=t(8767),j=t(5838),Z=t(4410),v=t(1819),P=t(5004),C=t(5216),U=t(1163),D=t.n(U),N=t(3454);function E(){let n=(0,i.Z)(["\n display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin  : 142px 0 170px;\n  @media "," {\n    padding: 80px 0px;\n    margin: 0px 0px 120px;\n  }\n"]);return E=function(){return n},n}function A(){let n=(0,i.Z)(["\n  width: 800px;\n  @media "," {\n    width: 100%;\n    padding: 0 24px;\n    div{\n      margin-bottom: 0px;\n    }\n  }\n"]);return A=function(){return n},n}function F(){let n=(0,i.Z)(["\n display: flex;\n  flex-direction: column;\n  width: 596px;\n  @media "," {\n   width: 100%;\n   padding: 0 24px;\n  }\n"]);return F=function(){return n},n}function L(){let n=(0,i.Z)(["\n  width: 800px;\n  height: 145px;\n  font-size:18px;\n  line-height: 26px;\n  font-weight: ",";\n  background-color: #F1F1F5;\n  border-radius: 5px;\n  padding:30px;\n  margin: 67px  auto 50px;\n  span{\n    font-weight: ",";\n  }\n  @media "," {\n    width: 100%;\n    height: 100%;\n    font-size:12px;\n    line-height: 20px;\n    margin: 18px  auto 40px;\n    padding:20px 24px;\n  }\n"]);return L=function(){return n},n}function _(){let n=(0,i.Z)(["\n  display:flex;\n  justify-content:  center;\n  width: 100%;\n  margin: 24px auto;\n"]);return _=function(){return n},n}function z(){let n=(0,i.Z)(["\n  width: 100%;\n  border-radius: 5px;\n  font-size:18px;\n  line-height: 38px;\n  font-weight: ",";\n  margin-top:40px;\n  @media "," {\n    border-radius: 5px;\n    margin-top:30px;\n  }\n"]);return z=function(){return n},n}let T=s.ZP.div(E(),l.Uh.mobileL),I=s.ZP.div(A(),l.Uh.mobileL),S=s.ZP.div(F(),l.Uh.mobileL),B=s.ZP.div(L(),(0,l.Ue)("regular"),(0,l.Ue)("semiBold"),l.Uh.mobileL),O=s.ZP.div(_()),k=(0,s.ZP)(l.zx)(z(),(0,l.Ue)("bold"),l.Uh.mobileL);var R=function(n){var e,t;let{subsNo:i}=n,[s,l]=(0,o.useState)(null),a=(0,c.sJ)((0,Z.TD)("subscribeChange".concat(i))),U=(0,c.Zl)((0,Z.TD)("subscribeChange".concat(i))),E=(0,c.sJ)((0,Z.cI)("subscribeChange".concat(i))),A=(0,c.Zl)((0,Z.cI)("subscribeChange".concat(i))),F=(0,c.Zl)((0,v.yM)("subscribeChange".concat(i))),[L,_]=(0,o.useState)({product:[],period:4,deliveryDate:null,dows:[],addressNo:null,paymentNo:null,totalPrice:null,milesAmount:0,coupon:{},subsNo:i}),z=(0,c.sJ)((0,Z.FX)("subscribeChange".concat(i))),R=(0,c.Zl)((0,Z.FX)("subscribeChange".concat(i))),J=(0,c.sJ)((0,v.yM)("subscribeChange".concat(i))),M=(0,c.sJ)((0,P.R9)("subscribeChange".concat(i))),K=(0,c.Zl)((0,P.R9)("subscribeChange".concat(i))),X=(0,c.sJ)((0,Z.By)("subscribeChange".concat(i))),Q=(0,c.sJ)((0,C._)("subscribeChange".concat(i))),V=(0,c.Zl)((0,C._)("subscribeChange".concat(i))),W=async()=>await (0,j.Y)({method:"POST",withCredentials:!0,data:L,url:"".concat(N.env.NEXT_PUBLIC_API_SERVER,"/subscribe/subscribechange")}),{refetch:Y}=(0,y.useQuery)("subscribeChange".concat(i),W,{enabled:!1,refetchOnWindowFocus:!1,refetchOnmount:!1,refetchOnReconnect:!1,retry:!1,onSuccess:n=>{let e=n.data;200===n.status&&"success"===e.status?alert("구독변경에 성공했습니다."):alert("구독변경에 실패했습니다. 고객센터를 문의주세요."),D().replace("/mypage",void 0,{shallow:!1})},onError:n=>{console.error("Error Occured : ",n)}}),q=async()=>await (0,j.Y)({method:"GET",withCredentials:!0,params:{subsNo:i},url:"".concat(N.env.NEXT_PUBLIC_API_SERVER,"/subscribe/info")});(0,y.useQuery)("getSubscribeInfo",q,{enabled:null!=i,refetchOnWindowFocus:!1,refetchOnmount:!1,refetchOnReconnect:!1,retry:!1,onSuccess:n=>{let e=n.data.data;200===n.status&&(F(n=>({...n,addressNo:e.addressNo})),K(n=>({...n,paymentNo:e.paymentNo,addPayment:!1})))},onError:n=>{console.error("Error Occured : ",n)}});let G=()=>{let n=L.product;if(0===n.length)return alert("상품 수량을 선택해주세요."),!1;if(0!==n.length)for(let e=0;e<a.list.length;e++){let t=a.list[e],i=!1;for(let r=0;r<n.length;r++){let o=n[r];if(o.dow===t){i=!0;break}}if(!1===i)return alert("".concat(t,"요일 상품 수량을 선택해주세요.")),!1}return L.deliveryDate?L.addressNo?L.paymentNo?void Y():(alert("결제정보를 입력해주세요."),!1):(alert("배송 주소를 입력해주세요."),!1):(alert("배송 시작일을 선택해주세요."),!1)};(0,o.useEffect)(()=>{console.log("deliveryDowStateInfo.list",a.list,E.list),_(n=>({...n,dows:a.list}))},[a.list]),(0,o.useEffect)(()=>{var n;if(E&&(null===(n=E.list)||void 0===n?void 0:n.length)!==0){let{totalPrice:e,defaultDiscountPrice:t,amountDiscount:i}=H(E.list);V(n=>({...n,milesAmount:0})),_(n=>({...n,product:E.list,totalPrice:e,defaultDiscountPrice:t,amountDiscount:4*i}))}},[E.list]),(0,o.useEffect)(()=>{_(n=>({...n,addressNo:J.addressNo}))},[J.addressNo]);let H=n=>{let e=0,t=0;if(L){var i;for(let r=0;r<(null===(i=L.dows)||void 0===i?void 0:i.length);r++){let o=L.dows[r],s=0,l=0;for(let c=0;c<n.length;c++){let a=n[c];o===a.dow&&(l+=a.amount,s+=parseInt(a.price)*a.amount)}l>=2&&t++,e+=4*s}return{totalPrice:e,defaultDiscountPrice:e-4e3*t,amountDiscount:t}}};return(0,o.useEffect)(()=>{_(n=>({...n,deliveryDate:z.deliveryDate}))},[z.deliveryDate]),(0,o.useEffect)(()=>{_(n=>({...n,paymentNo:M.paymentNo}))},[M.paymentNo]),(0,o.useEffect)(()=>{(null==L?void 0:L.defaultDiscountPrice)<parseInt(Q.milesAmount)?(V(n=>({...n,milesAmount:L.defaultDiscountPrice})),_(n=>({...n,coupon:Q.coupon,milesAmount:L.defaultDiscountPrice}))):_(n=>({...n,coupon:Q.coupon,milesAmount:Q.milesAmount}))},[Q.coupon,Q.milesAmount]),(0,o.useEffect)(()=>{null!=X.list&&_(n=>({...n,refundPrice:X.list.TotalPrice,refundMilesAmount:X.list.MilesAmount}))},[X]),(0,o.useEffect)(()=>{l(w.tq)},[]),(0,o.useEffect)(()=>{window.onbeforeunload=n=>(_({product:[],period:4,deliveryDate:null,dows:[],addressNo:null,paymentNo:null,totalPrice:null,milesAmount:0,coupon:{},subsNo:i}),U(()=>[]),R(()=>[]),V(()=>[]),A(n=>({...n,list:[]})),!1);let n=n=>{_({product:[],period:4,deliveryDate:null,dows:[],addressNo:null,paymentNo:null,totalPrice:null,milesAmount:0,coupon:{},subsNo:i}),U(()=>[]),R(()=>[]),V(()=>[]),A(n=>({...n,list:[]}))};return D().events.on("routeChangeStart",n),()=>{D().events.off("routeChangeStart",n),window.onbeforeunload=()=>{}}},[]),(0,o.useEffect)(()=>{console.log("newSubscribeInfo",L)},[L]),(0,o.useEffect)(()=>{console.log("productInfo is changed",E.list)},[E.list]),(0,r.jsxs)(T,{children:[(0,r.jsx)(I,{children:(0,r.jsx)(u.Z,{url:"/mypage",title:"전체 구독 변경"})}),(0,r.jsxs)(B,{children:[(0,r.jsx)("p",{children:"- 구독 변경은 기존 구독의 남은 주문수는 전체 해지 및 카드 환불 처리돼요"}),(0,r.jsx)("p",{children:"- 새로운 구독에 대한 결제 후 구독 변경이 완료돼요"}),(0,r.jsx)("p",{children:"- 구독 변경시 지정한 첫 배송일부터 변경된 구독이 적용돼요"})]}),(0,r.jsxs)(S,{children:[(0,r.jsx)(d.Z,{stateKey:"subscribeChange".concat(i)}),a&&(null===(e=a.list)||void 0===e?void 0:e.length)>=2&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{selectedDowList:a.list,stateKey:"subscribeChange".concat(i)}),(0,r.jsx)(p.Z,{stateKey:"subscribeChange".concat(i)})]}),a&&(null===(t=a.list)||void 0===t?void 0:t.length)>=2&&(null==L?void 0:L.deliveryDate)!=null&&(null==L?void 0:L.length)!==0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{stateKey:"subscribeChange".concat(i)}),(0,r.jsx)(x.Z,{stateKey:"subscribeChange".concat(i),selectedDowListLength:a.length,redirectUrl:"/subscribe/".concat(i),failRedirectUrl:"/subscribe/".concat(i)}),(0,r.jsx)(m.Z,{stateKey:"subscribeChange".concat(i)}),(0,r.jsx)(b.Z,{subsNo:i,stateKey:"subscribeChange".concat(i),refundType:"change"}),(0,r.jsx)(g.Z,{paymentDetails:L}),(0,r.jsx)(O,{children:(0,r.jsx)(k,{onClick:G,children:"구독 결제하기"})})]})]})]})};function J(){let n=(0,i.Z)(["\n\n"]);return J=function(){return n},n}let M=s.ZP.div(J());var K=function(){return(0,r.jsx)(M,{children:(0,r.jsx)(R,{subsNo:0})})}}},function(n){n.O(0,[26,129,798,979,140,177,866,774,888,179],function(){return n(n.s=3675)}),_N_E=n.O()}]);