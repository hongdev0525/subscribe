(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{4163:function(e,n,t){"use strict";var i=t(9521);t(1163);var o=t(5675),r=t.n(o),s=t(3735);t(7294);var c=t(8802),a=t.n(c),l=t(5893),u=i.ZP.div.withConfig({displayName:"MypageTitle__MypageTitleWrapper",componentId:"sc-uuxqct-0"})(["position:relative;display:flex;align-items:center;padding-bottom:67px;border-bottom:1px solid #232323;@media ","{border-bottom:none;padding-bottom:0;margin-bottom:40px;}"],s.Uh.mobileL),d=i.ZP.div.withConfig({displayName:"MypageTitle__MypageTitleContainer",componentId:"sc-uuxqct-1"})(["text-align:center;width:100%;"]),p=i.ZP.div.withConfig({displayName:"MypageTitle__MypageTitleText",componentId:"sc-uuxqct-2"})(["font-size:28px;line-height:33px;font-weight:",";margin-bottom:12px;@media ","{font-size:20px;font-weight:",";}"],(0,s.Ue)("medium"),s.Uh.mobileL,(0,s.Ue)("regular")),f=i.ZP.div.withConfig({displayName:"MypageTitle__BackwardImageContainer",componentId:"sc-uuxqct-3"})(["position:absolute;left:0;top:17px;transform:translate(0%,-50%);img{cursor:pointer;}@media ","{img{width:28px;height:28px;}}"],s.Uh.mobileL);n.Z=function(e){var n=e.url,t=e.title,i=e.backward,o=function(e){location.href=e};return(0,l.jsxs)(u,{children:[!0===(void 0===i||i)&&(0,l.jsx)(f,{children:(0,l.jsx)(r(),{src:"".concat(a().assetPrefix,"/img/mypage/backward_icon.png"),width:34,height:34,alt:"뒤로가기 아이콘",onClick:function(){return o(n)}})}),(0,l.jsx)(d,{children:(0,l.jsx)(p,{children:t})})]})}},5033:function(e,n,t){"use strict";var i=t(9499),o=t(29),r=t(7794),s=t.n(r),c=t(9521),a=t(1569),l=t(1491),u=t(3735),d=t(8767),p=t(1896),f=t(4480),h=t(4093);t(7294);var m=t(35),g=t(5893),b=t(3454);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var w=c.ZP.div.withConfig({displayName:"RefundInfo__RefundInfoWrapper",componentId:"sc-1e908dq-0"})(["margin-bottom:40px;"]),j=c.ZP.div.withConfig({displayName:"RefundInfo__RefundInfoContainer",componentId:"sc-1e908dq-1"})(["width:100%;background-color:#fefefe;border:1px solid #DC5F00;padding:12px 40px  52px;border-radius:10px;margin-top:20px;@media ","{width:100%;padding:20px;margin-top:30px;}"],u.Uh.mobileL),v=c.ZP.ul.withConfig({displayName:"RefundInfo__RefundInfoList",componentId:"sc-1e908dq-2"})(["display:flex;flex-direction:column;align-items:center;"]),C=c.ZP.li.withConfig({displayName:"RefundInfo__RefundInfoGroupContainer",componentId:"sc-1e908dq-3"})(["display:flex;justify-content:space-between;flex-direction:column;align-items:center;width:100%;padding:30px 0;border-bottom:0.5px solid #A9A9A8;@media ","{padding:20px 0;}"],u.Uh.mobileL),P=c.ZP.div.withConfig({displayName:"RefundInfo__RefundInfoGroup",componentId:"sc-1e908dq-4"})(["display:flex;justify-content:space-between;width:100%;@media ","{margin-bottom:8px;}"],u.Uh.mobileL),_=c.ZP.p.withConfig({displayName:"RefundInfo__RefundInfoLabel",componentId:"sc-1e908dq-5"})(["font-size:18px;line-height:39px;font-weight:",";@media ","{font-size:12px;line-height:16px;font-weight:",";flex-basis:20%;}"],(0,a.U)("regular"),u.Uh.mobileL,(0,a.U)("regular")),N=c.ZP.div.withConfig({displayName:"RefundInfo__RefundInfoDetails",componentId:"sc-1e908dq-6"})(["display:flex;font-size:18px;line-height:39px;font-weight:",";p{padding-left:10px;span{font-weight:",";}}@media ","{font-size:12px;line-height:14px;font-weight:",";p{padding-left:4px;white-space:nowrap;}span{font-weight:",";}}"],(0,a.U)("regular"),(0,a.U)("semiBold"),u.Uh.mobileL,(0,a.U)("bold"),(0,a.U)("regular")),I=c.ZP.div.withConfig({displayName:"RefundInfo__RefundDetailsGroupContainer",componentId:"sc-1e908dq-7"})(["display:flex;flex-direction:column;align-items:flex-end;@media ","{display:flex;flex-direction:column;align-items:flex-end;width:100%;}"],u.Uh.mobileL),D=c.ZP.div.withConfig({displayName:"RefundInfo__RefundDetailsGroup",componentId:"sc-1e908dq-8"})(["display:flex;justify-content:space-between;width:305px;font-size:18px;line-height:33px;font-weight:",";span,p{color:#DC5F00;}p{}@media ","{justify-content:flex-end;width:100%;font-size:12px;p{text-align:right;flex-basis:30%;}span{text-align:right;flex-basis:30%;}}"],(0,a.U)("semiBold"),u.Uh.mobileL),O=c.ZP.div.withConfig({displayName:"RefundInfo__TotalInfo",componentId:"sc-1e908dq-9"})(["display:flex;justify-content:flex-end;width:100%;text-align:right;font-size:20px;line-height:33px;font-weight:",";margin-top:30px;color:#DC5F00;& span{font-size:18px;line-height:33px;font-weight:",";margin-right:22px;color:#DC5F00;}& h2{font-size:24px;font-weight:",";color:#DC5F00;}@media ","{text-align:right;font-size:12px;line-height:12px;font-weight:",";margin-top:15px;color:#DC5F00;& span{font-size:12px;line-height:13px;font-weight:",";margin-right:22px;color:#DC5F00;}& h2{font-size:16px;}}"],(0,a.U)("semiBold"),(0,a.U)("semiBold"),(0,a.U)("bold"),u.Uh.mobileL,(0,a.U)("bold"),(0,a.U)("semiBold"));n.Z=function(e){var n,t=e.subsNo,i=e.stateKey,r=e.refundType,c=(0,f.sJ)((0,h.By)(i)),a=(0,f.Zl)((0,h.By)(i)),u=(n=(0,o.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Y)({method:"GET",withCredentials:!0,params:{subsNo:t,refundType:r},url:"".concat(b.env.NEXT_PUBLIC_API_SERVER,"/subscribe/refundinfo")});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,d.useQuery)("RefundInfo".concat(t),u,{onSuccess:function(e){"success"===e.data.status&&a(function(n){return y(y({},n),{},{list:e.data.data})})},onError:function(e){console.error(e)}}),(0,g.jsxs)(w,{children:[(0,g.jsx)(l.Dx,{children:"환불 정보"}),(0,g.jsxs)(j,{children:[(0,g.jsxs)(v,{children:[c.list.NextDeliveryDate&&(0,g.jsx)(C,{children:(0,g.jsxs)(P,{children:[(0,g.jsx)(_,{children:"마지막 배송일"}),(0,g.jsx)(N,{children:(0,g.jsx)("p",{children:m.y.DateFormatting(c.list.NextDeliveryDate).split(" ")[0]})})]})}),(0,g.jsxs)(C,{children:[(0,g.jsxs)(P,{children:[(0,g.jsx)(_,{children:"결제금액"}),(0,g.jsxs)(N,{children:[m.y.numberCommaFormat(c.list.TotalPrice),"원"]})]}),(0,g.jsxs)(P,{children:[(0,g.jsx)(_,{children:"이용내역"}),(0,g.jsx)(N,{children:c.list.Tags&&c.list.Tags.map(function(e,n){return(0,g.jsxs)("p",{children:[e.TagLabel," ( ",(0,g.jsxs)("span",{children:[e.UseAmount,"개 "]})," / ",e.TotalAmount,"개)"]},"refundProduct".concat(n))})})]}),(0,g.jsxs)(P,{children:[(0,g.jsx)(_,{children:"이용금액"}),(0,g.jsxs)(N,{children:[m.y.numberCommaFormat(c.list.UsePrice),"원"]})]})]}),(0,g.jsx)(C,{children:(0,g.jsxs)(P,{children:[(0,g.jsx)(_,{children:"환불금액"}),(0,g.jsxs)(I,{children:[(0,g.jsxs)(D,{children:[(0,g.jsx)("span",{children:"카드부분취소"}),(0,g.jsxs)("p",{children:[m.y.numberCommaFormat(c.list.TotalPrice-c.list.UsePrice),"원"]})]}),c.list.MilesAmount&&(0,g.jsxs)(D,{children:[(0,g.jsx)("span",{children:"포인트 반환"}),(0,g.jsxs)("p",{children:[m.y.numberCommaFormat(c.list.MilesAmount),"원"]})]})]})]})})]}),(0,g.jsxs)(O,{children:[(0,g.jsx)("span",{children:"총 환불금액"}),(0,g.jsxs)("h2",{children:[m.y.numberCommaFormat(c.list.TotalPrice-c.list.UsePrice+(c.list.MilesAmount?c.list.MilesAmount:0)),"원"]})]})]})]})}},5170:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var i=t(7294),o=t(9521);t(1455);var r=t(3735),s=t(4480);t(1746),t(7706);var c=t(5893);o.ZP.div.withConfig({displayName:"MypageSubscribe__MypageSubscribeContainer",componentId:"sc-19hj7ne-0"})(["min-width:50%;"]);var a=t(9499),l=t(29),u=t(7794),d=t.n(u),p=t(4163),f=t(886),h=t(1748),m=t(2544),g=t(9295),b=t(3289),x=t(2951),y=t(5885),w=t(5033),j=t(5518),v=t(8767),C=t(1896),P=t(4093),_=t(8254),N=t(129),I=t(7044),D=t(1163),O=t.n(D),Z=t(3454);function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var S=o.ZP.div.withConfig({displayName:"SubscribeChange__SubscribeChangeWrapper",componentId:"sc-19ehd6c-0"})(["display:flex;flex-direction:column;align-items:center;margin :142px 0 170px;@media ","{padding:80px 0px;margin:0px 0px 120px;}"],r.Uh.mobileL),R=o.ZP.div.withConfig({displayName:"SubscribeChange__MypageTitleContainer",componentId:"sc-19ehd6c-1"})(["width:800px;@media ","{width:100%;padding:0 24px;div{margin-bottom:0px;}}"],r.Uh.mobileL),T=o.ZP.div.withConfig({displayName:"SubscribeChange__SubscribeChangeContainer",componentId:"sc-19ehd6c-2"})(["display:flex;flex-direction:column;width:596px;@media ","{width:100%;padding:0 24px;}"],r.Uh.mobileL),L=o.ZP.div.withConfig({displayName:"SubscribeChange__SubscribeChangeNotice",componentId:"sc-19ehd6c-3"})(["width:800px;height:145px;font-size:18px;line-height:26px;font-weight:",";background-color:#F1F1F5;border-radius:5px;padding:30px;margin:67px  auto 50px;span{font-weight:",";}@media ","{width:100%;height:100%;font-size:12px;line-height:20px;margin:18px  auto 40px;padding:20px 24px;}"],(0,r.Ue)("regular"),(0,r.Ue)("semiBold"),r.Uh.mobileL),A=o.ZP.div.withConfig({displayName:"SubscribeChange__SubscribeButtonContainer",componentId:"sc-19ehd6c-4"})(["display:flex;justify-content:center;width:100%;margin:24px auto;"]),F=(0,o.ZP)(r.zx).withConfig({displayName:"SubscribeChange__SubscribeButton",componentId:"sc-19ehd6c-5"})(["width:100%;border-radius:5px;font-size:18px;line-height:38px;font-weight:",";margin-top:40px;@media ","{border-radius:5px;margin-top:30px;}"],(0,r.Ue)("bold"),r.Uh.mobileL),z=function(e){var n,t,o,r,a=e.subsNo,u=(0,i.useState)(null),D=(u[0],u[1]),U=(0,s.sJ)((0,P.TD)("subscribeChange".concat(a))),z=(0,s.Zl)((0,P.TD)("subscribeChange".concat(a))),M=(0,s.sJ)((0,P.cI)("subscribeChange".concat(a))),k=(0,s.Zl)((0,P.cI)("subscribeChange".concat(a))),q=(0,s.Zl)((0,_.yM)("subscribeChange".concat(a))),B=(0,i.useState)({product:[],period:4,deliveryDate:null,dows:[],addressNo:null,paymentNo:null,totalPrice:null,milesAmount:0,coupon:{},subsNo:a}),J=B[0],K=B[1],X=(0,s.sJ)((0,P.FX)("subscribeChange".concat(a))),G=(0,s.Zl)((0,P.FX)("subscribeChange".concat(a))),W=(0,s.sJ)((0,_.yM)("subscribeChange".concat(a))),Q=(0,s.sJ)((0,N.R9)("subscribeChange".concat(a))),V=(0,s.Zl)((0,N.R9)("subscribeChange".concat(a))),Y=(0,s.sJ)((0,P.By)("subscribeChange".concat(a))),H=(0,s.sJ)((0,I._)("subscribeChange".concat(a))),$=(0,s.Zl)((0,I._)("subscribeChange".concat(a))),ee=(n=(0,l.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.Y)({method:"POST",withCredentials:!0,data:J,url:"".concat(Z.env.NEXT_PUBLIC_API_SERVER,"/subscribe/subscribechange")});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),en=(0,v.useQuery)("subscribeChange".concat(a),ee,{enabled:!1,refetchOnWindowFocus:!1,refetchOnmount:!1,refetchOnReconnect:!1,retry:!1,onSuccess:function(e){var n=e.data;200===e.status&&"success"===n.status?alert("구독변경에 성공했습니다."):alert("구독변경에 실패했습니다. 고객센터를 문의주세요."),O().replace("/mypage",void 0,{shallow:!1})},onError:function(e){console.error("Error Occured : ",e)}}).refetch,et=(t=(0,l.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.Y)({method:"GET",withCredentials:!0,params:{subsNo:a},url:"".concat(Z.env.NEXT_PUBLIC_API_SERVER,"/subscribe/info")});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,v.useQuery)("getSubscribeInfo",et,{enabled:null!=a,refetchOnWindowFocus:!1,refetchOnmount:!1,refetchOnReconnect:!1,retry:!1,onSuccess:function(e){var n=e.data.data;200===e.status&&(q(function(e){return E(E({},e),{},{addressNo:n.addressNo})}),V(function(e){return E(E({},e),{},{paymentNo:n.paymentNo,addPayment:!1})}))},onError:function(e){console.error("Error Occured : ",e)}}),(0,i.useEffect)(function(){console.log("deliveryDowStateInfo.list",U.list,M.list),K(function(e){return E(E({},e),{},{dows:U.list})})},[U.list]),(0,i.useEffect)(function(){var e;if(M&&(null===(e=M.list)||void 0===e?void 0:e.length)!==0){var n=ei(M.list),t=n.totalPrice,i=n.defaultDiscountPrice,o=n.amountDiscount;$(function(e){return E(E({},e),{},{milesAmount:0})}),K(function(e){return E(E({},e),{},{product:M.list,totalPrice:t,defaultDiscountPrice:i,amountDiscount:4*o})})}},[M.list]),(0,i.useEffect)(function(){K(function(e){return E(E({},e),{},{addressNo:W.addressNo})})},[W.addressNo]);var ei=function(e){var n=0,t=0;if(J){for(var i=0;i<(null===(o=J.dows)||void 0===o?void 0:o.length);i++){for(var o,r=J.dows[i],s=0,c=0,a=0;a<e.length;a++){var l=e[a];r===l.dow&&(c+=l.amount,s+=parseInt(l.price)*l.amount)}c>=2&&t++,n+=4*s}return{totalPrice:n,defaultDiscountPrice:n-4e3*t,amountDiscount:t}}};return(0,i.useEffect)(function(){K(function(e){return E(E({},e),{},{deliveryDate:X.deliveryDate})})},[X.deliveryDate]),(0,i.useEffect)(function(){K(function(e){return E(E({},e),{},{paymentNo:Q.paymentNo})})},[Q.paymentNo]),(0,i.useEffect)(function(){(null==J?void 0:J.defaultDiscountPrice)<parseInt(H.milesAmount)?($(function(e){return E(E({},e),{},{milesAmount:J.defaultDiscountPrice})}),K(function(e){return E(E({},e),{},{coupon:H.coupon,milesAmount:J.defaultDiscountPrice})})):K(function(e){return E(E({},e),{},{coupon:H.coupon,milesAmount:H.milesAmount})})},[H.coupon,H.milesAmount]),(0,i.useEffect)(function(){null!=Y.list&&K(function(e){return E(E({},e),{},{refundPrice:Y.list.TotalPrice,refundMilesAmount:Y.list.MilesAmount})})},[Y]),(0,i.useEffect)(function(){D(j.tq)},[]),(0,i.useEffect)(function(){window.onbeforeunload=function(e){return K({product:[],period:4,deliveryDate:null,dows:[],addressNo:null,paymentNo:null,totalPrice:null,milesAmount:0,coupon:{},subsNo:a}),z(function(){return[]}),G(function(){return[]}),$(function(){return[]}),k(function(e){return E(E({},e),{},{list:[]})}),!1};var e=function(e){K({product:[],period:4,deliveryDate:null,dows:[],addressNo:null,paymentNo:null,totalPrice:null,milesAmount:0,coupon:{},subsNo:a}),z(function(){return[]}),G(function(){return[]}),$(function(){return[]}),k(function(e){return E(E({},e),{},{list:[]})})};return O().events.on("routeChangeStart",e),function(){O().events.off("routeChangeStart",e),window.onbeforeunload=function(){}}},[]),(0,i.useEffect)(function(){console.log("newSubscribeInfo",J)},[J]),(0,i.useEffect)(function(){console.log("productInfo is changed",M.list)},[M.list]),(0,c.jsxs)(S,{children:[(0,c.jsx)(R,{children:(0,c.jsx)(p.Z,{url:"/mypage",title:"전체 구독 변경"})}),(0,c.jsxs)(L,{children:[(0,c.jsx)("p",{children:"- 구독 변경은 기존 구독의 남은 주문수는 전체 해지 및 카드 환불 처리돼요"}),(0,c.jsx)("p",{children:"- 새로운 구독에 대한 결제 후 구독 변경이 완료돼요"}),(0,c.jsx)("p",{children:"- 구독 변경시 지정한 첫 배송일부터 변경된 구독이 적용돼요"})]}),(0,c.jsxs)(T,{children:[(0,c.jsx)(f.Z,{stateKey:"subscribeChange".concat(a)}),U&&(null===(o=U.list)||void 0===o?void 0:o.length)>=2&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h.Z,{selectedDowList:U.list,stateKey:"subscribeChange".concat(a)}),(0,c.jsx)(m.Z,{stateKey:"subscribeChange".concat(a)})]}),U&&(null===(r=U.list)||void 0===r?void 0:r.length)>=2&&(null==J?void 0:J.deliveryDate)!=null&&(null==J?void 0:J.length)!==0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g.Z,{stateKey:"subscribeChange".concat(a)}),(0,c.jsx)(b.Z,{stateKey:"subscribeChange".concat(a),selectedDowListLength:U.length,redirectUrl:"/subscribe/".concat(a),failRedirectUrl:"/subscribe/".concat(a)}),(0,c.jsx)(x.Z,{stateKey:"subscribeChange".concat(a)}),(0,c.jsx)(w.Z,{subsNo:a,stateKey:"subscribeChange".concat(a),refundType:"change"}),(0,c.jsx)(y.Z,{paymentDetails:J}),(0,c.jsx)(A,{children:(0,c.jsx)(F,{onClick:function(){var e=J.product;if(0===e.length)return alert("상품 수량을 선택해주세요."),!1;if(0!==e.length)for(var n=0;n<U.list.length;n++){for(var t=U.list[n],i=!1,o=0;o<e.length;o++)if(e[o].dow===t){i=!0;break}if(!1===i)return alert("".concat(t,"요일 상품 수량을 선택해주세요.")),!1}return J.deliveryDate?J.addressNo?J.paymentNo?void en():(alert("결제정보를 입력해주세요."),!1):(alert("배송 주소를 입력해주세요."),!1):(alert("배송 시작일을 선택해주세요."),!1)},children:"구독 결제하기"})})]})]})]})},M=o.ZP.div.withConfig({displayName:"subsNo__SubscribeDetailsWrapper",componentId:"sc-1ehnpcw-0"})([""]),k=function(e){var n=e.subsNo;return(0,c.jsx)(M,{children:(0,c.jsx)(z,{subsNo:n})})}},3675:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mypage/subscribe/[subsNo]",function(){return t(5170)}])}},function(e){e.O(0,[26,674,255,345,411,591,774,888,179],function(){return e(e.s=3675)}),_N_E=e.O()}]);