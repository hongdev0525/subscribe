(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[181],{10:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login/kakaologin",function(){return t(8949)}])},8949:function(e,n,t){"use strict";t.r(n);var o=t(7297),r=t(5893),a=t(7294);t(1163);var c=t(9521),s=t(8767),l=t(5838),u=t(4480),i=t(8869),d=t(1505),h=t(2490),f=t(3454);function _(){let e=(0,o.Z)(["\n  \n"]);return _=function(){return e},e}function p(){let e=(0,o.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    opacity: 1;\n    position: fixed;\n    top:0;\n    left:0;\n    height: 100vh;\n    width: 100vw;\n    background-color: #fcfcfc;\n    z-index: 99999;\n"]);return p=function(){return e},e}let E=c.ZP.div(_()),k=c.ZP.div(p());n.default=function(){let[e,n]=(0,a.useState)(null),[t,o]=(0,a.useState)(null),[c,_]=(0,a.useState)(null);(0,u.sJ)(i.w6);let p=()=>(0,l.Y)({baseURl:"".concat(f.env.NEXT_PUBLIC_DOMAIN),url:"https://kapi.kakao.com/v2/user/me",method:"GET",headers:{"Content-type":"application/x-www-form-urlencoded;charset=utf-8",Authorization:"Bearer ".concat(t)}}),g=()=>(0,l.Y)({baseURl:"".concat(f.env.NEXT_PUBLIC_DOMAIN),url:"https://kauth.kakao.com/oauth/token",method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded;charset=utf-8"},data:{grant_type:"authorization_code",client_id:"".concat(f.env.NEXT_PUBLIC_KAKAO_RESTAPI_KEY),redirect_uri:"".concat(f.env.NEXT_PUBLIC_DOMAIN+"/login/kakaologin"),code:"".concat(e)}}),w=()=>(0,l.Y)({baseURl:"".concat(f.env.NEXT_PUBLIC_DOMAIN),url:"".concat(f.env.NEXT_PUBLIC_API_SERVER,"/login/kakaologin"),withCredentials:!0,method:"POST",data:{userInfo:c}}),{refetch:y}=(0,s.useQuery)(["requestKakaoLogin",c],w,{retry:!1,enabled:null!=c,onSuccess:e=>{"success"===e.data.status?(h.y.setItemWithExpireTime("loggedIn",!0,1296e4),location.replace("/")):"not exist"===e.data.status&&(location.href="/signup/simple")},onError:e=>{console.error("Error Occured : ",e)}}),{refetch:I}=(0,s.useQuery)(["getUserInfo",t],p,{retry:!1,enabled:null!=t,onSuccess:e=>{console.log("res :>> ",e),_(e.data)},onError:e=>{console.error("Error Occured : ",e)}}),{refetch:N}=(0,s.useQuery)(["getAccessToken",e],g,{retry:!1,enabled:null!=e,onSuccess:e=>{console.log("res :>> ",e);let n=e.data.access_token;o(n)},onError:e=>{console.error("Error Occured : ",e)}});return(0,a.useEffect)(()=>{let e=new URL(document.location).searchParams.get("code");e&&n(e)},[]),(0,r.jsx)(E,{children:(0,r.jsx)(k,{children:(0,r.jsx)(d.iT,{height:"80",width:"80",radius:"9",color:"#DC5F00",secondaryColor:"#a9a9a8",ariaLabel:"loading",wrapperStyle:!0,wrapperClass:!0,strokeWidth:"2",strokeWidthSecondary:"4"})})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=10)}),_N_E=e.O()}]);