(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[367],{2322:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subscribe",function(){return n(1772)}])},1772:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var s=n(7297),i=n(5893),o=n(9521),r=n(1163),l=n.n(r);n(5838);var u=n(4881),c=n(1292),d=n(6777),a=n(7505),b=n(8027),f=n(4515),m=n(6798),p=n(9971),h=n(4410),v=n(4480),g=n(7294);n(8767),n(2490);var x=n(8264),w=n(5004),Z=n(5216),y=n(1819);function D(){let e=(0,s.Z)(["\n    width: 596px;\n    min-height: 100vh;\n    padding : 170px 0;\n@media "," {\n    min-height: 100vh;\n    width: 327px;\n    padding: 120px 0;\n    @media "," {\n        padding: 115px 0;\n    }\n  }\n"]);return D=function(){return e},e}function j(){let e=(0,s.Z)(["\n  display:flex;\n  justify-content:  center;\n  width: 100%;\n  margin: 24px auto;\n"]);return j=function(){return e},e}function N(){let e=(0,s.Z)(["\n  width: 100%;\n  border-radius: 5px;\n  font-size:18px;\n  line-height: 38px;\n  font-weight: ",";\n  margin-top:40px;\n  @media "," {\n    border-radius: 5px;\n    margin-top:30px;\n  }\n"]);return N=function(){return e},e}let _=o.ZP.div(D(),p.Uh.mobileL,p.Uh.mobileL),E=o.ZP.div(j()),P=(0,o.ZP)(p.zx)(N(),(0,x.U)("bold"),p.Uh.mobileL);var I=function(){var e,t;let n=(0,v.sJ)((0,h.TD)("subscribe")),s=(0,v.Zl)((0,h.TD)("subscribe")),o=(0,v.sJ)(h.bw),r=(0,v.Zl)(h.bw),p=(0,v.Zl)((0,h.cI)("subscribe")),x=(0,v.sJ)((0,w.R9)("subscribe")),D=(0,v.Zl)((0,w.R9)("subscribe")),j=(0,v.sJ)((0,h.cI)("subscribe")),N=(0,v.sJ)((0,Z._)("subscribe")),I=(0,v.Zl)((0,Z._)("subscribe")),S=(0,v.sJ)((0,h.FX)("subscribe")),A=(0,v.Zl)((0,h.FX)("subscribe")),J=(0,v.sJ)((0,y.yM)("subscribe")),L=(0,v.Zl)((0,y.yM)("subscribe")),K=()=>{L(e=>({...e,addressList:[],addressNo:null,addModal:!1,addressAvailable:null})),D(e=>[]),r(null),s(()=>[]),A(()=>[]),I(()=>[]),p(e=>({...e,list:[]}))};(0,g.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("tmpSubscribeInfo"));console.log("tmp",e),e&&(r(e),p(t=>({...t,list:e.product})),s(t=>({...t,list:e.dows})),L(t=>({...t,addModal:!1,addressNo:e.addressNo})),A(t=>({...t,deliveryDate:e.deliveryDate})))},[]),(0,g.useEffect)(()=>{window.onbeforeunload=e=>(localStorage.removeItem("tmpSubscribeInfo"),K(),!1);let e=e=>{K(),localStorage.removeItem("tmpSubscribeInfo")};return l().events.on("routeChangeStart",e),()=>{l().events.off("routeChangeStart",e),window.onbeforeunload=()=>{}}},[]);let U=e=>{let t=0,n=0;if(o){for(let s=0;s<o.dows.length;s++){let i=o.dows[s],r=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];i===c.dow&&(l+=c.amount,r+=parseInt(c.price)*c.amount)}l>=2&&n++,t+=4*r}return console.log("amountDiscount :>> ",n),{totalPrice:t,defaultDiscountPrice:t-4e3*n,amountDiscount:n}}};return(0,g.useEffect)(()=>{var e;if(j&&(null===(e=j.list)||void 0===e?void 0:e.length)!==0){let{totalPrice:t,defaultDiscountPrice:n,amountDiscount:s}=U(j.list);I(e=>({...e,milesAmount:0})),r(e=>({...e,product:j.list,totalPrice:t,defaultDiscountPrice:n,amountDiscount:4*s}))}},[j.list]),(0,g.useEffect)(()=>{console.log(x),r(e=>({...e,paymentNo:x.paymentNo}))},[x.paymentNo]),(0,g.useEffect)(()=>{(null==o?void 0:o.totalPrice)<parseInt(N.milesAmount)?(I(e=>({...e,milesAmount:o.totalPrice})),r(e=>({...e,coupon:N.coupon,milesAmount:o.totalPrice}))):r(e=>({...e,coupon:N.coupon,milesAmount:N.milesAmount}))},[N.coupon,N.milesAmount]),(0,g.useEffect)(()=>{r(e=>({...e,deliveryDate:S.deliveryDate}))},[S.deliveryDate]),(0,g.useEffect)(()=>{console.log("subscribeStateInfo",o)},[o]),(0,g.useEffect)(()=>{r(e=>({...e,addressNo:J.addressNo}))},[J.addressNo]),(0,i.jsxs)(_,{children:[(0,i.jsx)(u.Z,{stateKey:"subscribe"}),n&&(null===(e=n.list)||void 0===e?void 0:e.length)>=2&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{selectedDowList:n.list,stateKey:"subscribe"}),(0,i.jsx)(b.Z,{stateKey:"subscribe"})]}),n&&(null===(t=n.list)||void 0===t?void 0:t.length)>=2&&(null==o?void 0:o.deliveryDate)!=null&&(null==o?void 0:o.length)!==0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{stateKey:"subscribe"}),(0,i.jsx)(a.Z,{stateKey:"subscribe",selectedDowListLength:n.length,redirectUrl:"/subscribe",failRedirectUrl:"/subscribe"}),(0,i.jsx)(f.Z,{stateKey:"subscribe"}),(0,i.jsx)(m.Z,{paymentDetails:o}),(0,i.jsx)(E,{children:(0,i.jsx)(P,{onClick:()=>!1,children:"구독 결제하기"})})]})]})};function S(){let e=(0,s.Z)(["\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    width: 100%;\n"]);return S=function(){return e},e}let A=o.ZP.div(S());var J=function(){return(0,i.jsx)(A,{children:(0,i.jsx)(I,{})})}}},function(e){e.O(0,[26,129,798,979,140,177,774,888,179],function(){return e(e.s=2322)}),_N_E=e.O()}]);